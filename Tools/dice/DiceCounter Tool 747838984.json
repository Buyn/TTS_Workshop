{
  "SaveName": "DiceCounter Tool",
  "GameMode": "DiceCounterMod",
  "Gravity": 0.5,
  "PlayArea": 0.5,
  "Date": "8/20/2016 2:18:30 AM",
  "Table": "Table_Hexagon",
  "Sky": "Sky_Sunset",
  "Note": "",
  "Rules": "",
  "XmlUI": "",
  "LuaScript": "--[[ Lua code. See documentation: http://berserk-games.com/knowledgebase/scripting/ --]]\n\n--[[ The OnLoad function. This is called after everything in the game save finishes loading.\nMost of your script code goes here. --]]\nfunction onload()\n    --\nend\n\n--[[ The Update function. This is called once per frame. --]]\nfunction update ()\n    --\nend\n",
  "LuaScriptState": "",
  "Grid": {
    "Type": 0,
    "Lines": false,
    "Color": {
      "r": 0.0,
      "g": 0.0,
      "b": 0.0
    },
    "Opacity": 0.75,
    "ThickLines": false,
    "Snapping": false,
    "Offset": false,
    "BothSnapping": false,
    "xSize": 0.5,
    "ySize": 0.5,
    "PosOffset": {
      "x": 0.0,
      "y": 1.0,
      "z": 0.0
    }
  },
  "Hands": {
    "Enable": true,
    "DisableUnused": false,
    "Hiding": 0,
    "HandTransforms": [
      {
        "Color": "Red",
        "Transform": {
          "posX": -13.6426086,
          "posY": 3.57056212,
          "posZ": -7.4927206,
          "rotX": 0.0,
          "rotY": 60.0000076,
          "rotZ": 0.0,
          "scaleX": 10.268074,
          "scaleY": 6.63386965,
          "scaleZ": 4.89323664
        }
      },
      {
        "Color": "Yellow",
        "Transform": {
          "posX": -13.314683,
          "posY": 3.5705626,
          "posZ": 8.303754,
          "rotX": 0.0,
          "rotY": 119.999992,
          "rotZ": 0.0,
          "scaleX": 10.2680779,
          "scaleY": 6.63386965,
          "scaleZ": 4.89323139
        }
      },
      {
        "Color": "Blue",
        "Transform": {
          "posX": 13.5734453,
          "posY": 3.5741446,
          "posZ": 7.753577,
          "rotX": 0.0,
          "rotY": 240.000015,
          "rotZ": 0.0,
          "scaleX": 10.2680712,
          "scaleY": 6.63386965,
          "scaleZ": 4.89323044
        }
      },
      {
        "Color": "White",
        "Transform": {
          "posX": -0.00162897655,
          "posY": 3.57318473,
          "posZ": -15.5395842,
          "rotX": 0.0,
          "rotY": 0.0,
          "rotZ": 0.0,
          "scaleX": 10.2680645,
          "scaleY": 6.6338706,
          "scaleZ": 4.89322853
        }
      },
      {
        "Color": "Green",
        "Transform": {
          "posX": 0.003717693,
          "posY": 3.5723536,
          "posZ": 15.6008968,
          "rotX": 0.0,
          "rotY": 180.000778,
          "rotZ": 0.0,
          "scaleX": 10.2680645,
          "scaleY": 6.63386965,
          "scaleZ": 4.89322758
        }
      },
      {
        "Color": "Pink",
        "Transform": {
          "posX": 13.6811962,
          "posY": 3.57414651,
          "posZ": -7.40927029,
          "rotX": 0.0,
          "rotY": 300.0,
          "rotZ": 0.0,
          "scaleX": 10.2680635,
          "scaleY": 6.63386965,
          "scaleZ": 4.89322662
        }
      }
    ]
  },
  "VectorLines": [],
  "ObjectStates": [
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": 0.0294240713,
        "posY": 2.71113467,
        "posZ": -0.081810236,
        "rotX": 0.0,
        "rotY": 269.51004,
        "rotZ": 0.0,
        "scaleX": 5.64315557,
        "scaleY": 3.5,
        "scaleZ": 5.34361458
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "e96179"
    },
    {
      "Name": "Bag",
      "Transform": {
        "posX": -0.0474829338,
        "posY": 0.7749654,
        "posZ": 0.497635216,
        "rotX": 1.28041956E-05,
        "rotY": 359.936249,
        "rotZ": -1.33614333E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.386064857,
        "g": 0.635170758,
        "b": 0.8788104
      },
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "--[[ Lua code. See documentation: http://berserk-games.com/knowledgebase/scripting/ --]]\r\n\r\n--[[ The OnLoad function. This is called after everything in the game save finishes loading.\r\nMost of your script code goes here. --]]\r\nfunction onload()\r\n    -- Tip out the bag\r\n    local ownPos = self.getPosition()\r\n    local ownScale = self.getScale()['x']\r\n\r\n    -- Spawn stuff with offset to the bag\r\n    local spawnOffsetYStep = 1 * ownScale\r\n\r\n    local spawnOffsetX = 5 * ownScale\r\n    local spawnOffsetY = spawnOffsetYStep\r\n    local spawnOffsetZ = 0\r\n\r\n    for _, objData in pairs(self.getObjects()) do\r\n        local params = {}\r\n        params.guid = objData['guid']\r\n        params.position = {ownPos['x'] + spawnOffsetX, ownPos['y'] + spawnOffsetY, ownPos['z'] + spawnOffsetZ}\r\n        self.takeObject(params)\r\n\r\n        -- Increase spawn height for each object so that they don't spawn inside each other\r\n        spawnOffsetY = spawnOffsetY + spawnOffsetYStep\r\n    end\r\nend\r\n\r\n--[[ The Update function. This is called once per frame. --]]\r\nfunction update ()\r\n    --\r\nend\r\n",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": -1.75372577,
            "posY": 3.01124477,
            "posZ": 2.1530757,
            "rotX": 0.867791533,
            "rotY": 359.972656,
            "rotZ": 0.812814236,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.149018824,
            "g": 0.8156863,
            "b": 0.731521845
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/259338860010706678/2955D4B6432E338473DD2354869701981FFFF64B/",
            "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/259338860010707200/0ECC0506B3A4F77134E67883BCA87B0DBD59A96D/",
            "NormalURL": "http://cloud-3.steamusercontent.com/ugc/259338860010707361/448CB64EC8A6165A3D3F475BF6F1349FB75EB18C/",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/259338860010706678/2955D4B6432E338473DD2354869701981FFFF64B/",
            "Convex": true,
            "MaterialIndex": 1,
            "TypeIndex": 4,
            "CastShadows": true
          },
          "XmlUI": "",
          "LuaScript": "--[[ Lua code. See documentation: http://berserk-games.com/knowledgebase/scripting/ --]]\r\n\r\n--[[ The OnLoad function. This is called after everything in the game save finishes loading.\r\nMost of your script code goes here. --]]\r\nfunction onload()\r\n    --[[ Text tool variant disabled until TTS supports putting them into bags\r\n    -- Get the text tool\r\n    --textObject = getObjectFromGUID('9226bf')\r\n    if textObject == nil then\r\n        -- The GUID is invalid\r\n        errorGuidInvalid()\r\n        textTool = nil\r\n    else\r\n        textTool = textObject.TextTool\r\n    end\r\n    --]]\r\n    emptyText = ' '\r\n    --[[\r\n    if textTool == nil then\r\n        -- The GUID is invalid\r\n        errorGuidInvalid()\r\n    else\r\n        -- Initialize the text options\r\n        local textColor = {}\r\n        textColor['r'] = 200\r\n        textColor['g'] = 200\r\n        textColor['b'] = 200\r\n        textTool.setFontColor(textColor)\r\n        textTool.setFontSize(40)\r\n        textTool.setValue(emptyText)\r\n    end\r\n    --]]\r\nend\r\n\r\n--[[ The Update function. This is called once per frame. --]]\r\nfunction update ()\r\n    --[[\r\n    -- Validate text object\r\n    if textTool == nil then\r\n        -- The GUID is invalid\r\n        errorGuidInvalid()\r\n        return\r\n    end\r\n    --]]\r\n    -- Get and validate cardboard object\r\n    if cardboard == nil then\r\n        cardboard = getObjectFromGUID('11df74')\r\n        if cardboard == nil then\r\n            -- The GUID is invalid\r\n            errorGuidInvalid()\r\n            return\r\n        end\r\n    end\r\n\r\n    -- If the zone is moving, wait\r\n    if not self.resting then\r\n        --textTool.setValue(emptyText)\r\n        --cardboard.setDescription(emptyText)\r\n        return\r\n    end\r\n\r\n    local ownPos = self.getPosition()\r\n    local ownRotation = self.getRotation()['x']\r\n    local ownScale = self.getScale()['x']\r\n\r\n    -- Move the display with the box\r\n    --[[\r\n    local displayOffsetX = -1.8 * ownScale\r\n    local displayOffsetY = 0.08 * ownScale\r\n    local displayOffsetZ = 2.5 * ownScale\r\n    --]]\r\n    local displayOffsetX = -1 * ownScale\r\n    local displayOffsetY = 0.05 * ownScale\r\n    local displayOffsetZ = 1.8 * ownScale\r\n    --textObject.setPosition({ownPos['x'] + displayOffsetX, ownPos['y'] + displayOffsetY, ownPos['z'] + displayOffsetZ})\r\n    cardboard.setPosition({ownPos['x'] + displayOffsetX, ownPos['y'] + displayOffsetY, ownPos['z'] + displayOffsetZ})\r\n\r\n    -- Compute the bounds of the box\r\n    local boundOffset = 2.6\r\n    local leftBound = ownPos['x'] - boundOffset * ownScale\r\n    local rightBound = ownPos['x'] + boundOffset * ownScale\r\n    local upperBound = ownPos['z'] + boundOffset * ownScale\r\n    local lowerBound = ownPos['z'] - boundOffset * ownScale\r\n\r\n    local valueToCounter = {}\r\n    local valuesToSort = {}\r\n\r\n    -- Iterate all objects in the zone\r\n    for _, obj in pairs(getAllObjects()) do\r\n        -- Fetch resting dices\r\n        if obj != nil and obj.tag == 'Dice' and obj.resting then\r\n            -- Only use objects inside the zone\r\n            local objPos = obj.getPosition()\r\n            if objPos['x'] > leftBound and objPos['x'] < rightBound and objPos['z'] > lowerBound and objPos['z'] < upperBound then\r\n                local value = obj.getValue()\r\n                local counter = valueToCounter[value]\r\n                -- First occurrence of this value\r\n                if counter == nil then\r\n                    counter = 0\r\n                    valuesToSort[#valuesToSort + 1] = value\r\n                end\r\n                -- Increase the occurrence of this value\r\n                counter = counter + 1\r\n                valueToCounter[value] = counter\r\n            end\r\n        end\r\n    end\r\n\r\n    -- Process the tracked values, sorted and build the lines to display\r\n    local textLines = {}\r\n    table.sort(valuesToSort)\r\n    for index, value in ipairs(valuesToSort) do\r\n        local counter = valueToCounter[value]\r\n        local line = '#' .. value .. ': ' .. counter\r\n        textLines[#textLines + 1] = line\r\n    end\r\n\r\n    -- Display the text\r\n    local text = table.concat(textLines, '\\n')\r\n    if text == '' then\r\n        -- Suppress the default text 'Type Here'\r\n        text = emptyText\r\n    end\r\n    --textTool.setValue(text)\r\n    cardboard.setDescription(text)\r\nend\r\n\r\nfunction errorGuidInvalid()\r\n    print('Error: GUID invalid')\r\nend\r\n",
          "LuaScriptState": "",
          "GUID": "d81d3a"
        },
        {
          "Name": "Notecard",
          "Transform": {
            "posX": -2.7541132,
            "posY": 3.04252148,
            "posZ": 3.95339179,
            "rotX": 0.831486642,
            "rotY": 0.0416983627,
            "rotZ": 0.495609373,
            "scaleX": 0.475000471,
            "scaleY": 0.475000471,
            "scaleZ": 0.475000471
          },
          "Nickname": "",
          "Description": " ",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "11df74"
        }
      ],
      "GUID": "cf6b32"
    },
    {
      "Name": "Die_6",
      "Transform": {
        "posX": -5.202396,
        "posY": 1.29020011,
        "posZ": 1.20742607,
        "rotX": 90.0,
        "rotY": 23.9199371,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": false,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "MaterialIndex": 0,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "e71133"
    },
    {
      "Name": "Die_6",
      "Transform": {
        "posX": -4.84449434,
        "posY": 1.29020047,
        "posZ": 0.128314227,
        "rotX": 90.0,
        "rotY": 0.00049174414,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": false,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "MaterialIndex": 0,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "95c337"
    },
    {
      "Name": "Die_6",
      "Transform": {
        "posX": -5.00254631,
        "posY": 1.29020023,
        "posZ": -1.02885067,
        "rotX": -1.85946428E-05,
        "rotY": 153.270386,
        "rotZ": 179.999985,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": false,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "MaterialIndex": 0,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "860d51"
    }
  ],
  "TabStates": {
    "0": {
      "title": "Rules",
      "body": "",
      "color": "Grey",
      "visibleColor": {
        "r": 0.5,
        "g": 0.5,
        "b": 0.5
      },
      "id": 0
    },
    "1": {
      "title": "White",
      "body": "",
      "color": "White",
      "visibleColor": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "id": 1
    },
    "2": {
      "title": "Brown",
      "body": "",
      "color": "Brown",
      "visibleColor": {
        "r": 0.443,
        "g": 0.231,
        "b": 0.09
      },
      "id": 2
    },
    "3": {
      "title": "Red",
      "body": "",
      "color": "Red",
      "visibleColor": {
        "r": 0.856,
        "g": 0.1,
        "b": 0.094
      },
      "id": 3
    },
    "4": {
      "title": "Orange",
      "body": "",
      "color": "Orange",
      "visibleColor": {
        "r": 0.956,
        "g": 0.392,
        "b": 0.113
      },
      "id": 4
    },
    "5": {
      "title": "Yellow",
      "body": "",
      "color": "Yellow",
      "visibleColor": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.172
      },
      "id": 5
    },
    "6": {
      "title": "Green",
      "body": "",
      "color": "Green",
      "visibleColor": {
        "r": 0.192,
        "g": 0.701,
        "b": 0.168
      },
      "id": 6
    },
    "7": {
      "title": "Blue",
      "body": "",
      "color": "Blue",
      "visibleColor": {
        "r": 0.118,
        "g": 0.53,
        "b": 1.0
      },
      "id": 7
    },
    "8": {
      "title": "Teal",
      "body": "",
      "color": "Teal",
      "visibleColor": {
        "r": 0.129,
        "g": 0.694,
        "b": 0.607
      },
      "id": 8
    },
    "9": {
      "title": "Purple",
      "body": "",
      "color": "Purple",
      "visibleColor": {
        "r": 0.627,
        "g": 0.125,
        "b": 0.941
      },
      "id": 9
    },
    "10": {
      "title": "Pink",
      "body": "",
      "color": "Pink",
      "visibleColor": {
        "r": 0.96,
        "g": 0.439,
        "b": 0.807
      },
      "id": 10
    },
    "11": {
      "title": "Black",
      "body": "",
      "color": "Black",
      "visibleColor": {
        "r": 0.25,
        "g": 0.25,
        "b": 0.25
      },
      "id": 11
    }
  },
  "VersionNumber": ""
}